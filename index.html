<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <title>بازی تحت وب</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <h1>بازی ساده</h1>
    <p>موجودی شما: <span id="balance">0</span> coins</p>
    <p>این یک بازی نمونه است. برای افزایش موجودی، به ربات برگردید و بخرید.</p>
    <button onclick="buyMore()">خرید بیشتر (بازگشت به ربات)</button>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();

        const user = tg.initDataUnsafe.user;
        if (user) {
            fetch('http://your-flask-server-url:5000/get_balance?user_id=' + user.id)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('balance').innerText = data.balance;
                })
                .catch(error => console.error('Error:', error));
        }

        function buyMore() {
            // بازگشت به ربات با deep link برای خرید
            tg.openTelegramLink('https://t.me/your_bot_username?start=buy');
            tg.close();
        }
    </script>
</body>
</html>
